<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="view_form_material_requisition" model="ir.ui.view">
        <field name="name">material.requisition.form</field>
        <field name="model">material.requisition</field>
        <field name="arch" type="xml">
            <form string="Material Requisition">
                <header>
                    <field name="can_user_approve"/>
<!--                    <button name="create_contact"-->
<!--                            string="Create Contact"-->
<!--                            type="object"-->
<!--                            class="btn-primary"/>-->
                    <!--                    <button name="create_vendor"-->
                    <!--                            string="Create Vendor"-->
                    <!--                            type="object"-->s
                    <!--                            class="btn-secondary"/>-->
                    <!--                    <button name="create_customer"-->
                    <!--                            string="Create Customer"-->
                    <!--                            type="object"-->
                    <!--                            class="btn-success"/>-->
                    <button name="action_create_purchase_order"
                            type="object"
                            string="Create Purchase Order"
                            class="btn-primary"
                            invisible="purchase_order_id != False"/>
                    <button name="action_create_sale_order" type="object" string="Create Sale Order"
                            class="btn-primary"/>
                    <button name="open_store_remark_wizard" type="object" string="Store Request Approved"
                            invisible="state != 'draft'" class="btn-primary"/>
                    <button name="button_submit" type="object" string="Submit for Approvals"
                            invisible="state != 'store_verify'" class="btn-primary"/>
                    <button name="action_approve" type="object" string="Approved"
                            invisible="state != 'waiting_for_approval' and not can_user_approve" class="btn-primary"/>                   <!--  <button name="button_approve_1" string="Approve" type="object" class="oe_highlight" invisible="state != 'first_approval'" />
                    <button name="button_approve_2" string="Approve" type="object" class="oe_highlight" invisible="state != 'second_approval'" />
                    <button name="button_approve_3" string="Approve" type="object" class="oe_highlight" invisible="state != 'third_approval'" /> -->
                    <!-- <button name="button_po_done" string="Create RFQ" type="object" class="oe_highlight" invisible="state != 'approved'" /> -->
                    <button name="%(action_create_rfq_wizard)d" string="Create RFQ" type="action" class="oe_highlight"
                            invisible="state != 'approved'"/>
                    <button name="button_delivery_created" string="Delivered" type="object" class="oe_highlight"
                            invisible="state != 'rfq_created'"/>
                    <button name="button_reject" string="Reject" type="object"
                            invisible="state in ('draft', 'store_verify', 'approved', 'reject', 'rfq_created', 'delivery_created')"/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,rfq_created,delivery_created"/>
                </header>
                <sheet>
                    <widget name="web_ribbon" title="Store Verify" invisible="state != 'draft'"/>
                    <widget name="web_ribbon" title="Store Verify" invisible="state != 'store_verify'"/>
                    <widget name="web_ribbon" title="Store Verify" invisible="state != 'store_verify'"/>
                    <widget name="web_ribbon" title="Store Verify" invisible="state != 'store_verify'"/>
                    <widget name="web_ribbon" title="Store Verify" invisible="state != 'store_verify'"/>
                    <widget name="web_ribbon" title="Stock not Available"
                            invisible="state != 'approved'"/><!-- Check on hand qty -->
                    <widget name="web_ribbon" title="RFQ|PO Created"
                            invisible="state != 'rfq_created'"/><!-- CRETE RFQ -->
                    <widget name="web_ribbon" title="GRN Completed"
                            invisible="state != 'rfq_created'"/><!-- RFQ Done -->
                    <widget name="web_ribbon" title="Delivered"
                            invisible="state != 'delivery_created'"/><!-- DElivery Done -->
                    <div class="oe_button_box" name="button_box">
                        <button name="action_view_purchase_orders" type="object" string="Purchase Orders"
                                class="oe_stat_button" icon="fa-shopping-cart">
                            <field name="purchase_order_id" widget="statinfo" string="Purchase Orders"/>
                        </button>

                        <button name="action_view_picking" type="object" string="Stock" class="oe_stat_button"
                                icon="fa-shopping-cart">
                            <field name="stock_picking_id" widget="statinfo" string="Stock"/>
                        </button>
                    </div>
                    <div class="oe_title oe_left">
                        <h1>
                            <field name="name" readonly="1"/>
                        </h1>
                    </div>
                    <group>
                        <group string="Request Raised By">
                            <field name="request_raised_by_id"/>
                            <field name="department_id_by"/>
                            <field name="job_id_by"/>
                            <field name="reporting_manager_id"/>
                            <field name="purpose"/>
                            <field name="destination_location_id"/>
                            <field name="supplier_id"/>
                            <field name="purchase_order_id" readonly="1"/>
                        </group>
                        <group string="Request Raised For">
                            <field name="request_raised_for_id"/>
                            <field name="department_id_for"/>
                            <field name="job_id_for"/>
                            <field name="reporting_manager_id"/>
                            <field name="indent_date"/>
                            <field name="required_date"/>
                            <field name="requirement"/>
                            <field name="customer_id"/>
                            <field name="purchase_order_id" invisible="1"/>
                            <field name="company_id" invisible="1"/>
                            <field name="stock_picking_id" invisible="1"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Request Product">
                            <field name="line_ids">
                                <list editable="bottom">
                                    <field name="product_id"/>
                                    <field name="product_qty"/>
                                    <field name="product_uom_id"/>
                                    <field name="on_hand_qty" readonly="1"/>
                                    <field name="short_close"/>
                                </list>
                            </field>
                            <group string="Additional Information">
                                <field name="notes"/>
                            </group>
                        </page>
                        <page string="Approved Products">
                            <!-- Future fields go here -->
                            <group>
                                <field name="store_verified_remark"/>
                            </group>
                        </page>
                        <page string="Approver(s)">
                            <group>
                                <group>
                                    <field name="approval_type"/>
                                    <field name="no_of_approvals"/>
                                    <field name="requisition_history_ids">
                                        <list editable="bottom">
                                            <field name="user_id"/>
                                            <field name="status"/>
                                            <field name="date_done"/>
                                        </list>
                                    </field>
                                </group>
                            </group>
                        </page>
                        <page string="Approved Remarks">
                            <group>
                                <field name="approval_remark"/>
                            </group>
                        </page>
                        <page string="Requisition Lines">
                            <field name="line_ids">
                                <list editable="bottom">
                                    <field name="product_id"/>
                                    <field name="quantity"/>
                                </list>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
    <record id="view_list_material_requisition" model="ir.ui.view">
        <field name="name">material.requisition.list</field>
        <field name="model">material.requisition</field>
        <field name="arch" type="xml">
            <list string="Material Requisitions">
                <field name="name"/>
                <field name="request_raised_by_id"/>
                <field name="request_raised_for_id"/>
                <field name="indent_date"/>
                <field name="required_date"/>
                <field name="requirement"/>
                <field name="ribbon_state_html" widget="html"/>
                <field name="state"/>
            </list>
        </field>
    </record>
    <record id="action_material_requisition" model="ir.actions.act_window">
        <field name="name">Material Requisition</field>
        <field name="res_model">material.requisition</field>
        <field name="view_mode">list,form</field>
    </record>
</odoo>