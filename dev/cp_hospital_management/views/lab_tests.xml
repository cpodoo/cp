<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record model="ir.ui.view" id="view_lab_tests_search">
	    <field name="name">tests.search</field>
	    <field name="model">lab.tests</field>
	    <field name="priority" eval="8" />
	    <field name="arch" type="xml">
	        <search string="Lab Tests">
	            <field name="name"/>
	            <field name="patient"/>
	            <field name="physician_id"/>
	            <field name="pathologist_id"/>
	            <field name="date_requested"/>
	            <field name="date_analysis"/>
	            <group expand="0" string="Group By...">
	                <filter name="physician" string="Physician"  context="{'group_by': 'physician_id'}"/>
	                <filter name="patient" string="Patient"  context="{'group_by': 'patient'}"/>
	                <filter name="pathologist" string="Pathologist"  context="{'group_by': 'pathologist_id'}"/>
	                <filter name="lab_test" string="Lab Test"  context="{'group_by': 'name'}"/>
	            </group>
	        </search>
	    </field>
	</record>

	<record model="ir.ui.view" id="view_lab_tests_list">
	    <field name="name">lab.tests.list</field>
	    <field name="model">lab.tests</field>
	    <field name="arch" type="xml">
	        <list>
	            <field name="name"/>
	            <field name="patient"/>
	            <field name="date_requested"/>
	            <field name="physician_id"/>
	            <field name="pathologist_id"/>
	            <field name="date_analysis"/>
	            <field name="state"/>
	        </list>
	    </field>
	</record>
	<record model="ir.ui.view" id="view_lab_tests_form">
		<field name="name">lab.tests.form</field>
		<field name="model">lab.tests</field>
		<field name="arch" type="xml">
			<form string="Lab Tests">
				<header>
				    <button name="start_test" invisible="state != 'draft'" string="Start Test" type="object" class="oe_highlight"/>
				    <button name="complete_test" confirm="Are you sure you want to Complete Test?" invisible="state != 'progress'" string="Complete Test" type="object" class="oe_highlight"/>
				    <button name="create_invoices" class="btn-primary" string="Create Invoice" type="object" invisible="state != 'completed'"/>
				    <button name="cancel" string="Cancel" type="object" class="oe_link" invisible="state != 'draft'"/>
				    <field name="state" widget="statusbar" statusbar_visible="draft,progress,completed,invoiced"/>
				</header>
				<sheet>
					<div class="oe_button_box" name="button_box">
						<button name="action_view_invoice" type="object" context="{'search_default_number': name,'default_number': name}"
								invisible="invoice_count == 0" class="oe_stat_button" icon="fa-pencil-square-o">
							<field string="Invoices" name="invoice_count" widget="statinfo" readonly="1"/>
						</button>
					</div>
					<div class="oe_left" style="width: 500px;">
					    <div class="oe_title" style="width: 390px;">
					        <h1>
					            <field name="name" class="oe_inline" readonly="1" required="1"/>
					        </h1>
					    </div>
					</div>
					<group col="4">
					    <field name="patient" domain="[('is_patient','=',True)]"/>
					    <field name="pathologist_id"/>
					    <field name="date_requested"/>
					    <field name="date_analysis"/>
					    <field name="physician_id"/>
					</group>
					<notebook>
					    <page name="test_case" string="Lab Test Cases" autofocus="autofocus">
					        <field name="test_line" mode="list,kanban">
					            <list string="Lab Test Lines" editable="bottom">
					                <field name="sequence" widget="handle"/>
					                <field name="test_type"/>
					                <field name="result"/>
					                <field name="range"/>
					                <field name="units"/>
					            </list>
					        </field>
					    </page>
					</notebook>
		    	</sheet>
		    	<chatter/>
			</form>
    	</field>
	</record>
	
	<record model="ir.actions.act_window" id="action_lab_tests">
		<field name="name">Lab Tests</field>
		<field name="res_model">lab.tests</field>
		<field name="view_mode">list,form</field>
	</record>

<menuitem name="Lab Tests" id="menu_lab_tests" parent="menu_laboratory" action="action_lab_tests" sequence="0"/>

	<record model="ir.ui.view" id="view_lab_tests_type_search">
	    <field name="name">tests.search</field>
	    <field name="model">lab.tests.type</field>
	    <field name="priority" eval="8" />
	    <field name="arch" type="xml">
	        <search string="Lab Tests">
	            <field name="name"/>
	        </search>
	    </field>
	</record>

	 <record model="ir.ui.view" id="view_lab_tests_type_list">
	    <field name="name">lab.tests.type.list</field>
	    <field name="model">lab.tests.type</field>
	    <field name="arch" type="xml">
	        <list>
	            <field name="name"/>
	            <field name="range"/>
	            <field name="units"/>
	            <field name="price"/>
	        </list>
	    </field>
	</record>

	<record model="ir.ui.view" id="view_lab_tests_type_form">
	    <field name="name">lab.tests.type.form</field>
	    <field name="model">lab.tests.type</field>
	    <field name="arch" type="xml">
	        <form>
				<sheet>
					<group>
						<field name="name"/>
						<field name="range"/>
						<field name="units"/>
						<field name="price"/>
					</group>
				</sheet>
				<chatter/>
			</form>
	    </field>
	</record>

	<record model="ir.actions.act_window" id="action_lab_tests_type">
	    <field name="name">Lab Tests Type</field>
	    <field name="res_model">lab.tests.type</field>
	    <field name="view_mode">list,form</field>
	</record>
	
	<menuitem name="Laboratory" id="menu_laboratory_config" parent="menu_config" sequence="2"/>
	<menuitem name="Lab Tests Types" id="menu_lab_tests_type" parent="menu_laboratory_config" action="action_lab_tests_type" sequence="10"/>

</odoo>