<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<record id="view_domiciliary_unit_kanban" model="ir.ui.view">
	    <field name="name">domiciliary.unit.kanban</field>
	    <field name="model">health.center.domiciliary.unit</field>
	    <field name="arch" type="xml">
	        <kanban>
	            <field name="name" />
	            <field name="institution" />
	            <field name="address_city" />
	            <field name="address_state" can_create="true" can_write="true" />
	            <field name="address_country" can_create="true" can_write="true" />
	            <field name="email" />
	            <field name="id" />
				<templates>
	                <t t-name="kanban-box">
	                    <div class="oeh_medical_vignette oe_semantic_html_override d-flex flex-row">
	                        <div class="oeh_medical_image me-2 flex-shrink-0">
	                            <!-- Use button type="open" for the image -->
	                            <!-- Corrected image field to 'picture' -->
	                            <button name="open" type="open" class="oe_kanban_action p-0 border-0 bg-transparent">
	                                <img t-if="record.picture" t-att-alt="record.name.value" t-att-src="kanban_image('health.center.domiciliary.unit', 'picture', record.id.raw_value)" class="oeh_medical_picture"/>
	                                <img t-else="" t-att-alt="record.name.value" t-att-src="'/web/static/img/placeholder.png'" class="oeh_medical_picture"/> <!-- Added placeholder -->
	                            </button>
	                        </div>
	                        <div class="oeh_medical_details flex-grow-1">
	                            <!-- Use button type="open" for the name -->
	                            <button name="open" type="open" class="oe_kanban_action text-start p-0 border-0 bg-transparent fw-bold mb-1">
	                                <field name="name"/> <!-- Use field directly -->
	                            </button>
	                            <ul class="m-0 p-0 list-unstyled">
	                                <li t-if="record.institution.raw_value">
	                                    <field name="institution"/>
	                                </li>
	                                <li t-if="record.address_city.raw_value"> <!-- Check if city exists -->
	                                     <field name="address_city"/>
	                                     <!-- Conditionally add state/country -->
	                                     <t t-if="record.address_state.raw_value">, <field name="address_state"/></t>
	                                     <t t-if="record.address_country.raw_value">, <field name="address_country"/></t>
	                                </li>
	                                <li t-elif="record.address_state.raw_value"> <!-- Only state/country -->
	                                    <field name="address_state"/>
	                                    <t t-if="record.address_country.raw_value">, <field name="address_country"/></t>
	                                </li>
	                                <li t-elif="record.address_country.raw_value"> <!-- Only country -->
	                                     <field name="address_country"/>
	                                </li>
	                                <li t-if="record.email.raw_value">
	                                    <i class="fa fa-envelope me-1" role="img" aria-label="Email" title="Email"></i>
	                                    <a t-attf-href="mailto:#{record.email.raw_value}">
	                                        <field name="email"/>
	                                    </a>
	                                </li>
	                            </ul>
	                        </div>
	                    </div>
	                </t>
	            </templates>
	        </kanban>
	    </field>
	</record>
	<record id="view_domiciliary_search" model="ir.ui.view">
	    <field name="name">domiciliary.search</field>
	    <field name="model">health.center.domiciliary.unit</field>
	    <field name="priority" eval="8" />
	    <field name="arch" type="xml">
	        <search string="Domiciliary">
	            <field name="name"/>
	            <field name="institution"/>
	            <field name="address_city"/>
	            <field name="address_state"/>
	            <field name="address_country"/>
	            <field name="email"/>
	            <newline />
	            <group expand="0" string="Group By...">
	                <filter name="health_center" string="Health Center"  context="{'group_by': 'institution'}"/>
	            </group>
	        </search>
	    </field>
	</record>
	<record id="view_domiciliary_unit_list" model="ir.ui.view">
	    <field name="name">domiciliary.unit.list</field>
	    <field name="model">health.center.domiciliary.unit</field>
	    <field name="arch" type="xml">
	        <list string="Domiciliary Units Information">
	            <field name="name" required="1"/>
	            <field name="desc" required="1"/>
	            <field name="address_city" />
	            <field name="address_state"  />
	            <field name="address_country"  />
	        </list>
	    </field>
	</record>
	<record id="view_domiciliary_unit_form" model="ir.ui.view">
	    <field name="name">domiciliary.unit.form</field>
	    <field name="model">health.center.domiciliary.unit</field>
	    <field name="arch" type="xml">
	        <form string="Domiciliary Units">
	            <sheet>
	                <field name="picture" widget="image" class="oe_avatar" options="{'preview_image': 'image'}"/>
	                <div class="oe_title">
	                    <h1>
	                        <field name="name" required="1" default_focus="1" placeholder="Name"/>
	                    </h1>
	                </div>
                    <group>
                    	<group>
                            <field name="institution" required="1" placeholder="Health Center Type" options="{'no_open': True, 'no_create': True}"/>
                        </group>
                        <group>
	                        <field name="desc" required="1"/>
	                    </group>
	                </group>
	                <group>
	                    <group>
	                        <label for="street" string="Address"/>
	                        <div>
	                            <field name="street" placeholder="Street..." />
	                            <field name="street2" />
	                            <div class="address_format">
	                                <field name="address_city" placeholder="City" style="width: 40%" />
	                                <field name="address_state" class="oe_no_button" placeholder="State" style="width: 37%" options="{'no_open': True}"  />
	                                <field name="zip" placeholder="ZIP" style="width: 20%" />
	                            </div>
	                            <field name="address_country" placeholder="Country" class="oe_no_button" options="{'no_open': True, 'no_create': True}" />
	                        </div>
	                    </group>
	                    <group>
	                        <field name="phone" placeholder="e.g. +32.81.81.37.00" />
	                        <field name="mobile" />
	                        <field name="fax" />
	                        <field name="email" widget="email" />
	                    </group>
	                </group>
	                <notebook>
	                    <page string="Infrastructure">
	                        <group>
	                            <group>
	                                <field name="housing" />
	                                <field name="materials" />
	                                <field name="bedrooms" />
	                                <field name="total_surface" />
	                            </group>
	                            <group>
	                                <field name="dwelling" />
	                                <field name="roof_type" />
	                                <field name="bathrooms" />
	                            </group>
	                        </group>
	                        <group>
	                            <group>
	                                <field name="sewers" />
	                                <field name="trash" />
	                                <field name="gas" />
	                                <field name="television" />
	                            </group>
	                            <group>
	                                <field name="water" />
	                                <field name="electricity" />
	                                <field name="telephone" />
	                                <field name="internet" />
	                            </group>
	                        </group>
	                    </page>
	                </notebook>
	            </sheet>
	            <chatter/>
	        </form>
	    </field>
	</record>
	
	
	<record model="ir.actions.act_window" id="action_health_center_domiciliary_unit">
	    <field name="name">Domiciliary Units</field>
	    <field name="res_model">health.center.domiciliary.unit</field>
	    <field name="view_mode">kanban,list,form</field>
	</record>
	
	<menuitem name="Domiciliary Units" id="menu_health_center_domiciliary_unit" parent="menu_health_centers_main" action="action_health_center_domiciliary_unit" sequence="5"/>

</odoo>