<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record model="ir.ui.view" id="view_imaging_test_list">
	    <field name="name">imaging.test.list</field>
	    <field name="model">imaging.test</field>
	    <field name="arch" type="xml">
	        <list string="X-Ray Tests">
	            <field name="name" readonly="1" required="1"/>
	            <field name="test_type"  readonly="state != 'Draft'" required="1"/>
	            <field name="patient" readonly="state != 'Draft'" required="1"/>
	            <field name="requestor" readonly="state != 'Draft'"/>
	            <field name="date_requested" readonly="state != 'Draft'"/>
	            <field name="date_analysis" readonly="state not in ('Draft', 'Test In Progress')"/>
	            <field name="state" readonly="1"/>
	        </list>
	    </field>
	</record>
	<record model="ir.ui.view" id="view_imaging_test_form">
	    <field name="name">imaging.test.form</field>
	    <field name="model">imaging.test</field>
	    <field name="arch" type="xml">
	        <form string="Imaging Tests">
	            <header>
	                <button name="test_start" string="Start Test" type="object" class="oe_highlight" invisible="state != 'Draft'"/>
	                <button name="test_complete" string="Complete Test" type="object" class="oe_highlight" invisible="state != 'Test In Progress'"/>
	                <button confirm="Are you sure you want to create the invoice?" name="create_invoices" invisible="state != 'Completed'" string="Create Imaging Test Invoice" type="object" class="oe_highlight" />
	                <button name="cancel" string="Cancel" type="object" class="oe_link" invisible="state != 'Draft'"/>
	                <field name="state" widget="statusbar" statusbar_visible="Draft,Test In Progress,Completed,Invoiced" statusbar_colors="{'Test In Progress':'blue','Completed':'green','Invoiced':'grey'}" readonly="1"/>
	            </header>
	            <sheet>
	                 <div class="oe_button_box" name="button_box">
	                    <button name="action_view_invoice" type="object" context="{'search_default_number': name,'default_number': name}"
	                            invisible="invoice_count == 0"  class="oe_stat_button" icon="fa-pencil-square-o">
	                        <field string="Invoices" name="invoice_count" widget="statinfo" readonly="1"/>
	                    </button>
	                </div>
	                <div class="oe_left" style="width: 500px;">
	                    <div class="oe_title" style="width: 390px;">
	                        <h1>
	                            <field name="name" class="oe_inline" readonly="1" required="1" placeholder="Name"/>
	                        </h1>
	                        <field name="test_type" readonly="state != 'Draft'" required="1"/>
	                    </div>
	                </div>
	                <group>
	                    <group>
	                        <field name="patient" domain="[('is_patient','=',True)]" options="{'no_create': True}" readonly="state != 'Draft'" required="1"/>
	                        <field name="date_requested" readonly="state != 'Draft'"/>
	                    </group>
	                    <group>
	                        <field name="requestor" options="{'no_create': True}" readonly="state != 'Draft'"/>
	                        <field name="date_analysis" readonly="state not in ('Draft', 'Test In Progress')"/>
	                    </group>
	                </group>
	                <notebook>
	                    <page string="Images">
	                        <group>
	                            <group>
	                                <field name="image1" widget="image" readonly="state not in ('Draft', 'Test In Progress')"/>
	                                <field name="image3" widget="image" readonly="state not in ('Draft', 'Test In Progress')"/>
	                                <field name="image5" widget="image" readonly="state not in ('Draft', 'Test In Progress')"/>
	                            </group>
	                            <group>
	                                <field name="image2" widget="image" readonly="state not in ('Draft', 'Test In Progress')"/>
	                                <field name="image4" widget="image" readonly="state not in ('Draft', 'Test In Progress')"/>
	                                <field name="image6" widget="image" readonly="state not in ('Draft', 'Test In Progress')"/>
	                            </group>
	                        </group>
	                    </page>
	                    <page string="Information">
	                        <group>
	                            <field name="analysis" readonly="state not in ('Draft', 'Test In Progress')"/>
	                        </group>
	                        <group>
	                            <field name="conclusion" readonly="state not in ('Draft', 'Test In Progress')"/>
	                        </group>
	                    </page>
	                </notebook>
	            </sheet>
	            <chatter/>
	        </form>
	    </field>
	</record>
	<record model="ir.actions.act_window" id="action_imaging">
	    <field name="name">Imaging Tests</field>
	    <field name="res_model">imaging.test</field>
	    <field name="view_mode">list,form</field>
	</record>
	<menuitem name="Imaging Tests" id="menu_imaging" parent="menu_imaging_main" action="action_imaging" sequence="3"/>
	
	<record model="ir.ui.view" id="view_imaging_test_type_list">
	    <field name="name">imaging.test.type.list</field>
	    <field name="model">imaging.test.type</field>
	    <field name="arch" type="xml">
	        <list string="Imaging Test Types" editable="bottom">
	            <field name="name" required="1"/>
	            <field name="code" required="1"/>
	            <field name="test_charge" required="1"/>
	        </list>
	    </field>
	</record>
	
	<record model="ir.ui.view" id="view_imaging_test_type_form">
	    <field name="name">imaging.test.type.form</field>
	    <field name="model">imaging.test.type</field>
	    <field name="arch" type="xml">
	        <form string="Imaging Test Types">
	            <sheet>
	                <group col="4">
	                    <field name="name" required="1"/>
	                    <field name="code" required="1"/>
	                    <field name="test_charge" required="1"/>
	                </group>
	            </sheet>
	            <chatter/>
	        </form>
	    </field>
	</record>
	
	<record model="ir.actions.act_window" id="action_imaging_test_type">
	    <field name="name">Imaging Test Types</field>
	    <field name="res_model">imaging.test.type</field>
	    <field name="view_mode">list,form</field>
	</record>
	<menuitem name="Imaging" id="menu_imaging_config" parent="menu_config"  sequence="3"/>
	<menuitem name="Imaging Test Tyeps" id="menu_imaging_test_types" parent="menu_imaging_config" action="action_imaging_test_type"/>

</odoo>